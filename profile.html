<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>江西粤东气象社区交流安全中心 - 个人中心</title>
  <!-- Tailwind CSS v3 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#1e40af',
            secondary: '#3b82f6',
            accent: '#60a5fa',
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          }
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .bg-gradient-blue {
        background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      }
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen pb-20">
  <!-- 顶部标题区域 -->
  <header class="bg-gradient-blue text-white py-4 px-4">
    <div class="container mx-auto">
      <div class="flex items-center">
        <h1 class="text-lg font-bold">个人中心</h1>
      </div>
    </div>
  </header>

  <!-- 内容区域 -->
  <main class="container mx-auto px-4 py-6">
    <!-- 用户信息卡片 -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <div class="flex flex-col items-center">
        <div class="w-24 h-24 rounded-full overflow-hidden bg-gray-200 mb-4">
          <img id="userAvatar" src="https://via.placeholder.com/150" alt="用户头像" class="w-full h-full object-cover">
        </div>
        <h2 id="userName" class="text-xl font-semibold text-gray-800">用户名</h2>
        <p id="userQq" class="text-sm text-gray-600 mt-1">QQ: 123456789</p>
        <div id="userStatus" class="mt-3">
          <span class="inline-block px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full">账号状态正常</span>
        </div>
      </div>
    </div>

    <!-- 账号信息 -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">账号信息</h3>
      <div class="space-y-4">
        <div class="flex justify-between items-center">
          <span class="text-gray-600">用户名</span>
          <span id="infoUsername" class="text-gray-800 font-medium">用户名</span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600">QQ号码</span>
          <span id="infoQqNumber" class="text-gray-800 font-medium">123456789</span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600">注册时间</span>
          <span id="infoRegisterTime" class="text-gray-800 font-medium">2023-01-01 00:00:00</span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600">上次登录</span>
          <span id="infoLastLogin" class="text-gray-800 font-medium">2023-07-20 12:00:00</span>
        </div>
      </div>
    </div>

    <!-- 账号安全 -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">账号安全</h3>
      <div class="space-y-4">
        <button class="flex justify-between items-center w-full p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors duration-200">
          <span class="text-gray-800">修改密码</span>
          <i class="fa fa-chevron-right text-gray-400"></i>
        </button>
        <button class="flex justify-between items-center w-full p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors duration-200">
          <span class="text-gray-800">绑定手机</span>
          <i class="fa fa-chevron-right text-gray-400"></i>
        </button>
        <button class="flex justify-between items-center w-full p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors duration-200">
          <span class="text-gray-800">隐私设置</span>
          <i class="fa fa-chevron-right text-gray-400"></i>
        </button>
      </div>
    </div>

    <!-- 其他选项 -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="space-y-4">
        <button id="logoutBtn" class="flex justify-center items-center w-full p-3 bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition-colors duration-200">
          <i class="fa fa-sign-out mr-2"></i>
          <span>退出登录</span>
        </button>
      </div>
    </div>
  </main>

  <!-- 底部导航栏 -->
  <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg">
    <div class="flex justify-around">
      <a href="index.html" class="nav-link flex flex-col items-center py-2 px-4 text-gray-600">
        <i class="fa fa-home text-xl"></i>
        <span class="text-xs mt-1">首页</span>
      </a>
      <a href="report.html" class="nav-link flex flex-col items-center py-2 px-4 text-gray-600">
        <i class="fa fa-flag text-xl"></i>
        <span class="text-xs mt-1">我要举报</span>
      </a>
      <a href="progress.html" class="nav-link flex flex-col items-center py-2 px-4 text-gray-600">
        <i class="fa fa-tasks text-xl"></i>
        <span class="text-xs mt-1">处理进度</span>
      </a>
      <a href="more.html" class="nav-link flex flex-col items-center py-2 px-4 text-gray-600">
        <i class="fa fa-ellipsis-h text-xl"></i>
        <span class="text-xs mt-1">更多</span>
      </a>
      <a href="profile.html" class="nav-link flex flex-col items-center py-2 px-4 text-primary">
        <i class="fa fa-user text-xl"></i>
        <span class="text-xs mt-1">我的</span>
      </a>
    </div>
  </nav>

  <!-- 引入通用脚本 -->
  <script src="script.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // 获取当前用户信息
      const currentUser = AuthManager.getCurrentUser();
      if (currentUser) {
        // 更新用户信息显示
        document.getElementById('userName').textContent = currentUser.username;
        document.getElementById('userQq').textContent = `QQ: ${currentUser.qqNumber}`;
        document.getElementById('userAvatar').src = currentUser.status === 'banned' ? 'https://via.placeholder.com/150/cccccc/666666?text=BANNED' : currentUser.avatar;
        document.getElementById('infoUsername').textContent = currentUser.username;
        document.getElementById('infoQqNumber').textContent = currentUser.qqNumber;
        
        // 模拟注册时间和上次登录时间
        document.getElementById('infoRegisterTime').textContent = '2023-01-01 00:00:00';
        document.getElementById('infoLastLogin').textContent = '2023-07-20 12:00:00';
        
        // 更新用户状态
        const userStatusEl = document.getElementById('userStatus');
        if (currentUser.status === 'banned') {
          userStatusEl.innerHTML = `
            <span class="inline-block px-3 py-1 bg-red-100 text-red-800 text-sm rounded-full">账号已被封禁</span>
            <p class="text-xs text-red-600 mt-2 text-center">原因: ${currentUser.banInfo.reason}</p>
            <p class="text-xs text-red-600 mt-1 text-center">时间: ${Utils.formatDate(currentUser.banInfo.startTime)} ${currentUser.banInfo.endTime ? `至 ${Utils.formatDate(currentUser.banInfo.endTime)}` : '永久'}</p>
            <a href="appeal.html" class="inline-block mt-3 px-4 py-2 bg-primary text-white text-sm rounded-md hover:bg-secondary transition-colors duration-200">
              提交申诉
            </a>
          `;
        } else {
          userStatusEl.innerHTML = '<span class="inline-block px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full">账号状态正常</span>';
        }
      }

      // 退出登录
      document.getElementById('logoutBtn').addEventListener('click', () => {
        AuthManager.logout();
        Utils.showMessage('已退出登录', 'info');
        setTimeout(() => {
          window.location.href = 'login.html';
        }, 1000);
      });
    });
  </script>
</body>
</html>